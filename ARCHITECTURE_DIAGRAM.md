# ğŸ—ï¸ Goods Tracking System - Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GOODS TRACKING SYSTEM (GTS)                          â”‚
â”‚                   Full Client-Side Implementation                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ” AUTHENTICATION LAYER                         â”‚
â”‚                           (Supabase Auth)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ“± User Sign Up              ğŸ“± User Login              ğŸ“¤ Logout     â”‚
â”‚  â””â”€ Phone + Password          â””â”€ Phone + Password       â””â”€ Clear Sessionâ”‚
â”‚  â””â”€ Name                      â””â”€ Get Session            â””â”€ Navigate     â”‚
â”‚  â””â”€ Role (driver/official)    â””â”€ Load Metadata                         â”‚
â”‚  â””â”€ Vehicle (driver only)                                              â”‚
â”‚                                                                         â”‚
â”‚  ğŸ’¾ Storage: User Metadata (Supabase)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ {                                                 â”‚                 â”‚
â”‚  â”‚   "full_name": "John Doe",                       â”‚                 â”‚
â”‚  â”‚   "phone": "1234567890",                         â”‚                 â”‚
â”‚  â”‚   "role": "driver",                              â”‚                 â”‚
â”‚  â”‚   "vehicle_number": "ABC123"                     â”‚                 â”‚
â”‚  â”‚ }                                                 â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ğŸ’¾ DATA STORAGE LAYER                             â”‚
â”‚                       (Browser localStorage)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ—„ï¸ Key: "gts_parcels"                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ [                                                 â”‚                 â”‚
â”‚  â”‚   {                                               â”‚                 â”‚
â”‚  â”‚     "id": "abc-123-def-456",                     â”‚                 â”‚
â”‚  â”‚     "referenceNumber": "GTS-20260202-1001",      â”‚                 â”‚
â”‚  â”‚     "sender": {                                  â”‚                 â”‚
â”‚  â”‚       "name": "John Doe",                        â”‚                 â”‚
â”‚  â”‚       "address": "123 Main St",                  â”‚                 â”‚
â”‚  â”‚       "contact": "1234567890"                    â”‚                 â”‚
â”‚  â”‚     },                                            â”‚                 â”‚
â”‚  â”‚     "receiver": {                                â”‚                 â”‚
â”‚  â”‚       "name": "Jane Smith",                      â”‚                 â”‚
â”‚  â”‚       "address": "456 Oak Ave",                  â”‚                 â”‚
â”‚  â”‚       "contact": "0987654321"                    â”‚                 â”‚
â”‚  â”‚     },                                            â”‚                 â”‚
â”‚  â”‚     "items": [...],                              â”‚                 â”‚
â”‚  â”‚     "status": "registered",                      â”‚                 â”‚
â”‚  â”‚     "driverId": "user-uuid",                     â”‚                 â”‚
â”‚  â”‚     "timestamp": "2026-02-02T10:00:00Z"          â”‚                 â”‚
â”‚  â”‚   },                                              â”‚                 â”‚
â”‚  â”‚   { ... more parcels ... }                       â”‚                 â”‚
â”‚  â”‚ ]                                                 â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                         â”‚
â”‚  ğŸ”¢ Key: "gts_parcel_counter"                                          â”‚
â”‚  â””â”€ Value: "1001" (auto-increment)                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ğŸ‘¨â€ğŸ’¼ DRIVER APP             â”‚       ğŸ‘® OFFICIAL APP                â”‚
â”‚    (Blue/Indigo Theme)          â”‚    (Green/Emerald Theme)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚                                      â”‚
â”‚  ğŸ“‹ Features:                   â”‚  ğŸ“‹ Features:                        â”‚
â”‚  â”œâ”€ Register Parcels            â”‚  â”œâ”€ Track Parcels                   â”‚
â”‚  â”œâ”€ View History                â”‚  â”œâ”€ Scan QR Codes                   â”‚
â”‚  â”œâ”€ Generate QR Codes           â”‚  â”œâ”€ View Details                    â”‚
â”‚  â””â”€ Manage Profile              â”‚  â””â”€ Acknowledge/Verify              â”‚
â”‚                                  â”‚                                      â”‚
â”‚  ğŸ¯ Main Workflow:              â”‚  ğŸ¯ Main Workflow:                   â”‚
â”‚  1. Login                        â”‚  1. Login                           â”‚
â”‚  2. Fill Sender Form            â”‚  2. Click "Track Parcel"            â”‚
â”‚  3. Add Items                    â”‚  3. Scan QR / Enter Reference      â”‚
â”‚  4. Fill Receiver Form          â”‚  4. View Parcel Details             â”‚
â”‚  5. Submit                       â”‚  5. Click "Acknowledge"            â”‚
â”‚  6. Get QR Code + Reference     â”‚  6. Status â†’ "verified"             â”‚
â”‚                                  â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Component Architecture

```
/src/app/
â”‚
â”œâ”€ ğŸ” context/
â”‚  â”œâ”€ AuthContext.tsx         â†’ User authentication & session
â”‚  â””â”€ ParcelContext.tsx       â†’ Parcel CRUD operations
â”‚
â”œâ”€ ğŸ“± components/
â”‚  â”‚
â”‚  â”œâ”€ ğŸ‘¨â€ğŸ’¼ driver/
â”‚  â”‚  â”œâ”€ DriverSplash.tsx                â†’ Welcome screen
â”‚  â”‚  â”œâ”€ DriverSignup.tsx                â†’ Registration
â”‚  â”‚  â”œâ”€ DriverLogin.tsx                 â†’ Authentication
â”‚  â”‚  â”œâ”€ DriverHome.tsx                  â†’ Dashboard
â”‚  â”‚  â”œâ”€ DriverSenderDetails.tsx         â†’ Step 1: Sender info
â”‚  â”‚  â”œâ”€ DriverItemDetails.tsx           â†’ Step 2: Items
â”‚  â”‚  â”œâ”€ DriverReceiverDetails.tsx       â†’ Step 3: Receiver info
â”‚  â”‚  â”œâ”€ DriverParcelConfirmation.tsx    â†’ QR Code display â­
â”‚  â”‚  â””â”€ DriverHistory.tsx               â†’ Past parcels
â”‚  â”‚
â”‚  â”œâ”€ ğŸ‘® official/
â”‚  â”‚  â”œâ”€ OfficialSplash.tsx              â†’ Welcome screen
â”‚  â”‚  â”œâ”€ OfficialSignup.tsx              â†’ Registration
â”‚  â”‚  â”œâ”€ OfficialLogin.tsx               â†’ Authentication
â”‚  â”‚  â”œâ”€ OfficialHome.tsx                â†’ Dashboard
â”‚  â”‚  â”œâ”€ TrackParcel.tsx                 â†’ QR Scanner â­
â”‚  â”‚  â””â”€ OfficialParcelDetails.tsx       â†’ Parcel info + Acknowledge
â”‚  â”‚
â”‚  â””â”€ ğŸ¨ ui/
â”‚     â””â”€ [Reusable UI components]
â”‚
â””â”€ ğŸ”„ routes.ts                â†’ React Router configuration

/src/lib/
â”œâ”€ ğŸ” auth.ts                 â†’ Authentication functions
â”œâ”€ ğŸ“¦ parcels.ts              â†’ Parcel storage & retrieval â­
â””â”€ ğŸ”§ supabase.ts             â†’ Supabase client setup
```

---

## ğŸ”„ Data Flow Diagrams

### 1ï¸âƒ£ Parcel Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Driver    â”‚
â”‚  Fills Form â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ParcelContext.saveParcel()      â”‚
â”‚  â”œâ”€ Validates data               â”‚
â”‚  â”œâ”€ Gets user session            â”‚
â”‚  â””â”€ Calls createParcel()         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  parcels.createParcel()          â”‚
â”‚  â”œâ”€ Generate UUID                â”‚
â”‚  â”œâ”€ Generate reference number    â”‚
â”‚  â”‚   GTS-YYYYMMDD-XXXX          â”‚
â”‚  â”œâ”€ Create parcel object         â”‚
â”‚  â”œâ”€ Get existing parcels         â”‚
â”‚  â”œâ”€ Add new parcel to array      â”‚
â”‚  â””â”€ Save to localStorage         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DriverParcelConfirmation.tsx    â”‚
â”‚  â”œâ”€ Display QR Code              â”‚
â”‚  â”‚   <QRCodeSVG                  â”‚
â”‚  â”‚     value={referenceNumber}   â”‚
â”‚  â”‚     size={200} />             â”‚
â”‚  â”œâ”€ Show reference number        â”‚
â”‚  â””â”€ Copy to clipboard button     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ QR Code Scanning Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Official   â”‚
â”‚ Scans QR    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TrackParcel.tsx                 â”‚
â”‚  â”œâ”€ Initialize Html5Qrcode       â”‚
â”‚  â”œâ”€ Request camera permission    â”‚
â”‚  â”œâ”€ Start scanning               â”‚
â”‚  â””â”€ Decode QR â†’ Reference #      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ParcelContext.getParcel()       â”‚
â”‚  â””â”€ Calls getParcelByReference() â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  parcels.getParcelByReference()  â”‚
â”‚  â”œâ”€ Get parcels from localStorageâ”‚
â”‚  â”œâ”€ Find by referenceNumber      â”‚
â”‚  â””â”€ Return parcel data           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OfficialParcelDetails.tsx       â”‚
â”‚  â”œâ”€ Display sender info          â”‚
â”‚  â”œâ”€ Display items                â”‚
â”‚  â”œâ”€ Display receiver info        â”‚
â”‚  â”œâ”€ Show status                  â”‚
â”‚  â””â”€ [Acknowledge] button         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Parcel Acknowledgment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Official   â”‚
â”‚   Clicks    â”‚
â”‚ Acknowledge â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ParcelContext.acknowledgeParcel()â”‚
â”‚ â””â”€ Calls acknowledgeParcelAPI()  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  parcels.updateParcelStatus()    â”‚
â”‚  â”œâ”€ Get parcels from localStorageâ”‚
â”‚  â”œâ”€ Find parcel by reference     â”‚
â”‚  â”œâ”€ Update status to "verified"  â”‚
â”‚  â””â”€ Save back to localStorage    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Updates                      â”‚
â”‚  â”œâ”€ Show success toast           â”‚
â”‚  â”œâ”€ Status badge â†’ "Verified"   â”‚
â”‚  â””â”€ Button disabled              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Reference Number Generation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  generateReferenceNumber()             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  1. Read counter from localStorage     â”‚
â”‚     localStorage.getItem(              â”‚
â”‚       'gts_parcel_counter'             â”‚
â”‚     )                                   â”‚
â”‚     â†’ "1000"                            â”‚
â”‚                                         â”‚
â”‚  2. Increment counter                  â”‚
â”‚     1000 + 1 = 1001                    â”‚
â”‚                                         â”‚
â”‚  3. Save new counter                   â”‚
â”‚     localStorage.setItem(              â”‚
â”‚       'gts_parcel_counter',            â”‚
â”‚       '1001'                            â”‚
â”‚     )                                   â”‚
â”‚                                         â”‚
â”‚  4. Get current date                   â”‚
â”‚     new Date()                          â”‚
â”‚     â†’ 2026-02-02                       â”‚
â”‚                                         â”‚
â”‚  5. Format date                        â”‚
â”‚     YYYY: 2026                          â”‚
â”‚     MM:   02                            â”‚
â”‚     DD:   02                            â”‚
â”‚     â†’ "20260202"                        â”‚
â”‚                                         â”‚
â”‚  6. Format sequence                    â”‚
â”‚     1001.padStart(4, '0')              â”‚
â”‚     â†’ "1001"                            â”‚
â”‚                                         â”‚
â”‚  7. Combine parts                      â”‚
â”‚     "GTS-" + "20260202" + "-" + "1001" â”‚
â”‚     â†’ "GTS-20260202-1001"              â”‚
â”‚                                         â”‚
â”‚  8. Return reference number            â”‚
â”‚     return "GTS-20260202-1001"         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React Context API                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ” AuthContext                                            â”‚
â”‚  â”œâ”€ user: User | null                                      â”‚
â”‚  â”œâ”€ session: Session | null                                â”‚
â”‚  â”œâ”€ profile: UserProfile | null                            â”‚
â”‚  â”œâ”€ loading: boolean                                       â”‚
â”‚  â”‚                                                          â”‚
â”‚  â”œâ”€ signUp(data)                                           â”‚
â”‚  â”œâ”€ signIn(phone, password, role)                          â”‚
â”‚  â”œâ”€ signOut()                                              â”‚
â”‚  â””â”€ loadUserProfile(userId)                                â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“¦ ParcelContext                                          â”‚
â”‚  â”œâ”€ currentParcel: CurrentParcelData                       â”‚
â”‚  â”‚   â”œâ”€ sender?: SenderData                                â”‚
â”‚  â”‚   â”œâ”€ receiver?: ReceiverData                            â”‚
â”‚  â”‚   â””â”€ items?: ParcelItem[]                               â”‚
â”‚  â”‚                                                          â”‚
â”‚  â”œâ”€ setSenderData(data)                                    â”‚
â”‚  â”œâ”€ setItemsData(items)                                    â”‚
â”‚  â”œâ”€ setReceiverData(data)                                  â”‚
â”‚  â”œâ”€ saveParcel(receiverData?)                              â”‚
â”‚  â”œâ”€ getParcel(reference)                                   â”‚
â”‚  â”œâ”€ getParcelDetails(id)                                   â”‚
â”‚  â”œâ”€ acknowledgeParcel(reference)                           â”‚
â”‚  â””â”€ resetCurrentParcel()                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECURITY LAYERS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 1: Authentication (Supabase)                        â”‚
â”‚  â”œâ”€ Password hashing (bcrypt)                              â”‚
â”‚  â”œâ”€ JWT token generation                                   â”‚
â”‚  â”œâ”€ Session management                                     â”‚
â”‚  â””â”€ Phone number uniqueness                                â”‚
â”‚                                                             â”‚
â”‚  Layer 2: Authorization (Context + Guards)                 â”‚
â”‚  â”œâ”€ Check session before operations                        â”‚
â”‚  â”œâ”€ Role-based access (driver/official)                    â”‚
â”‚  â”œâ”€ Protected routes                                       â”‚
â”‚  â””â”€ User ID validation                                     â”‚
â”‚                                                             â”‚
â”‚  Layer 3: Data Isolation (localStorage)                    â”‚
â”‚  â”œâ”€ Per-browser storage                                    â”‚
â”‚  â”œâ”€ Domain-scoped data                                     â”‚
â”‚  â”œâ”€ No cross-user access                                   â”‚
â”‚  â””â”€ Client-side validation                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Responsive Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          MOBILE FIRST               â”‚
â”‚        (Primary Target)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ğŸ“± Mobile (320px - 768px)          â”‚
â”‚  â”œâ”€ Full-width forms                â”‚
â”‚  â”œâ”€ Touch-optimized buttons        â”‚
â”‚  â”œâ”€ Camera QR scanning             â”‚
â”‚  â”œâ”€ Single column layout           â”‚
â”‚  â””â”€ Large tap targets              â”‚
â”‚                                      â”‚
â”‚  ğŸ’» Desktop (768px+)                â”‚
â”‚  â”œâ”€ Centered cards (max-width)     â”‚
â”‚  â”œâ”€ Hover states                   â”‚
â”‚  â”œâ”€ Keyboard navigation            â”‚
â”‚  â”œâ”€ Multi-column when useful       â”‚
â”‚  â””â”€ External QR scanner support    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ External Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NPM PACKAGES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ” Authentication                                         â”‚
â”‚  â””â”€ @supabase/supabase-js (v2.93.3)                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“± QR Code                                                â”‚
â”‚  â”œâ”€ qrcode.react (v4.2.0)        â†’ Generate QR            â”‚
â”‚  â””â”€ html5-qrcode (v2.3.8)        â†’ Scan QR                â”‚
â”‚                                                             â”‚
â”‚  ğŸ¨ UI Components                                          â”‚
â”‚  â”œâ”€ lucide-react (v0.487.0)      â†’ Icons                  â”‚
â”‚  â”œâ”€ sonner (v1.7.3)               â†’ Toasts                â”‚
â”‚  â””â”€ tailwindcss (v4.0)            â†’ Styling               â”‚
â”‚                                                             â”‚
â”‚  ğŸ”„ Routing & State                                        â”‚
â”‚  â”œâ”€ react-router (v7.13.0)       â†’ Navigation             â”‚
â”‚  â””â”€ react (v18)                   â†’ UI Framework           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Performance Characteristics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERFORMANCE METRICS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“Š Operation Speeds (Estimated)                           â”‚
â”‚                                                             â”‚
â”‚  Authentication                                             â”‚
â”‚  â”œâ”€ Login:              1-2 seconds (Supabase API)        â”‚
â”‚  â”œâ”€ Session restore:    <100ms (localStorage)             â”‚
â”‚  â””â”€ Profile load:       <10ms (user metadata)             â”‚
â”‚                                                             â”‚
â”‚  Parcel Operations                                         â”‚
â”‚  â”œâ”€ Create parcel:      <50ms (localStorage write)        â”‚
â”‚  â”œâ”€ Get parcel:         <10ms (localStorage read)         â”‚
â”‚  â”œâ”€ Update status:      <50ms (localStorage write)        â”‚
â”‚  â””â”€ List parcels:       <20ms (localStorage + filter)     â”‚
â”‚                                                             â”‚
â”‚  QR Code                                                   â”‚
â”‚  â”œâ”€ Generate QR:        <100ms (SVG render)               â”‚
â”‚  â”œâ”€ Scan QR:            0.5-2 seconds (camera decode)     â”‚
â”‚  â””â”€ Display QR:         <50ms (component render)          â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¾ Storage Usage                                          â”‚
â”‚  â”œâ”€ Per parcel:         ~1-2 KB                            â”‚
â”‚  â”œâ”€ 100 parcels:        ~100-200 KB                        â”‚
â”‚  â”œâ”€ localStorage limit: 5-10 MB                            â”‚
â”‚  â””â”€ Capacity:           ~5,000 parcels before limit       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ System Capabilities

```
âœ… User Authentication (Driver & Official)
âœ… Multi-step Parcel Registration
âœ… Automatic Reference Number Generation
âœ… QR Code Generation (SVG)
âœ… QR Code Scanning (Camera)
âœ… Manual Reference Entry
âœ… Parcel Status Tracking
âœ… Parcel Verification/Acknowledgment
âœ… Client-side Data Persistence
âœ… Responsive Mobile/Desktop UI
âœ… Toast Notifications
âœ… Form Validation
âœ… Session Management
âœ… Role-based Access Control
âœ… History/List Views
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIGMA MAKE DEPLOYMENT                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸŒ Static Hosting                                         â”‚
â”‚  â”œâ”€ React SPA (Single Page App)                           â”‚
â”‚  â”œâ”€ Client-side routing                                    â”‚
â”‚  â””â”€ All assets bundled                                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ” External Services                                      â”‚
â”‚  â””â”€ Supabase (Authentication only)                         â”‚
â”‚     â”œâ”€ User signup/login                                   â”‚
â”‚     â”œâ”€ Session management                                  â”‚
â”‚     â””â”€ User metadata storage                               â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¾ Browser Storage                                        â”‚
â”‚  â””â”€ localStorage                                            â”‚
â”‚     â”œâ”€ Parcel data                                         â”‚
â”‚     â””â”€ Counter state                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“± No Backend Required                                    â”‚
â”‚  â”œâ”€ No server-side code                                   â”‚
â”‚  â”œâ”€ No database connections                                â”‚
â”‚  â”œâ”€ No API endpoints (except Supabase Auth)               â”‚
â”‚  â””â”€ 100% client-side after authentication                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Summary

This architecture provides:

âœ… **Complete Functionality** - All features working end-to-end  
âœ… **No Server Required** - Perfect for Figma Make deployment  
âœ… **Fast Performance** - Instant operations with localStorage  
âœ… **Reliable** - No network dependencies after auth  
âœ… **Scalable** - Can handle thousands of parcels  
âœ… **Modern Stack** - React, Supabase, Tailwind  
âœ… **Mobile-First** - Optimized for field use  
âœ… **Production-Ready** - Complete with error handling  

**The system is fully operational and ready to use!** ğŸ‰
